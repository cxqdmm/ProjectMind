## 1. 需求与方案梳理
- [ ] 1.1 确认记忆范围：仅包含“技能内容”和“技能参考文件内容”，不存普通对话文本
- [ ] 1.2 明确首版记忆层与 skills 的关系：记忆层独立存在，但结构/事件可参考 skills
- [ ] 1.3 设计记忆检索流程：输入（当前问题 + 上下文）、由大模型基于记忆元数据选择需要注入的记忆条目，返回结构供大模型使用

## 2. 规范与抽象定义
- [ ] 2.1 在 `agent-memory` 能力 spec 中补充核心 Requirement 与 Scenario（检索行为、写入/更新/废弃行为，限定仅针对技能内容/技能参考文件）
- [ ] 2.2 设计 Memory Provider / Memory Manager 的抽象接口（独立于 skills），由 Agent 编排在调用 skills 前先调用记忆层
- [ ] 2.3 规范 SSE/事件输出：定义“使用的记忆”事件格式，前端对应记忆展示组件的最小需求

## 3. 实现与集成（后续实现阶段使用）
- [ ] 3.1 在 `server` 端实现基础的记忆存取与检索（先以技能内容/技能参考文件为源，可用内存/简单持久化）
- [ ] 3.2 在 Agent 编排中接入记忆层，确保决策前插入“记忆选择”步骤（模型基于元数据判定）
- [ ] 3.3 输出“使用的记忆”事件，前端新增记忆展示组件；对未匹配到记忆的情形保持正常决策

## 4. 验证与文档
- [ ] 4.1 为典型对话场景补充自动化测试（含有/无历史记忆的对比）
- [ ] 4.2 在项目文档中补充“Agent 记忆管理”章节，说明使用方式与注意事项
- [ ] 4.3 通过 `openspec validate add-agent-memory-management --strict`

