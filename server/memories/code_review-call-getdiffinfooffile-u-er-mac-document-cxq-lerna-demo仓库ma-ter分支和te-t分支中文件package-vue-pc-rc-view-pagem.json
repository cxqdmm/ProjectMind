{
  "toolName": "call",
  "type": "call",
  "content": "{\n  \"filename\": \"packages/vue-pc/src/views/pageManager/list/components/search.vue\",\n  \"content\": \"diff --git a/packages/vue-pc/src/views/pageManager/list/components/search.vue b/packages/vue-pc/src/views/pageManager/list/components/search.vue\\nindex 6ee8ec3..e643cf4 100644\\n--- a/packages/vue-pc/src/views/pageManager/list/components/search.vue\\n+++ b/packages/vue-pc/src/views/pageManager/list/components/search.vue\\n@@ -165,6 +165,11 @@\\n     } finally {\\n       searchLoading.value = false;\\n     }\\n+    list.descs.map(i => {\\n+      if (i.label === '商品名称') {\\n+        i.category = '商品';\\n+      }\\n+    })\\n   };\\n \\n   // 使用lodash-es的debounce创建防抖搜索函数\",\n  \"originalContent\": \"<template>\\n  <div class=\\\"search-wrapper\\\">\\n    <div class=\\\"search-container\\\">\\n      <a-form\\n        :model=\\\"searchParams\\\"\\n        layout=\\\"inline\\\"\\n        class=\\\"search-form\\\"\\n      >\\n        <a-form-item label=\\\"商品名称\\\">\\n          <a-auto-complete\\n            v-model:value=\\\"searchParams.productName\\\"\\n            :options=\\\"productNameSuggestions\\\"\\n            style=\\\"width: 200px\\\"\\n            @search=\\\"handleProductNameSearch\\\"\\n            @select=\\\"handleProductNameSelect\\\"\\n          >\\n            <a-input\\n              placeholder=\\\"请输入商品名称\\\"\\n              :allow-clear=\\\"true\\\"\\n            >\\n              <template #suffix>\\n                <LoadingOutlined v-if=\\\"searchLoading\\\" />\\n              </template>\\n            </a-input>\\n            <template #option=\\\"item\\\">\\n              <div\\n                style=\\\"\\n                  display: flex;\\n                  justify-content: space-between;\\n                  align-items: center;\\n                \\\"\\n              >\\n                <span>{{ item.label }}</span>\\n                <span style=\\\"color: #999; font-size: 12px\\\">\\n                  {{ item.category || '商品' }}\\n                </span>\\n              </div>\\n            </template>\\n          </a-auto-complete>\\n        </a-form-item>\\n\\n        <a-form-item label=\\\"方案编码\\\">\\n          <a-input\\n            v-model:value=\\\"searchParams.factoryName\\\"\\n            placeholder=\\\"请输入\\\"\\n            allow-clear\\n            style=\\\"width: 200px\\\"\\n          />\\n        </a-form-item>\\n\\n        <a-form-item label=\\\"状态\\\">\\n          <a-select\\n            v-model:value=\\\"searchParams.status\\\"\\n            placeholder=\\\"请选择\\\"\\n            allow-clear\\n            style=\\\"width: 200px\\\"\\n          >\\n            <a-select-option\\n              v-for=\\\"option in statusOptions\\\"\\n              :key=\\\"option.value\\\"\\n              :value=\\\"option.value\\\"\\n            >\\n              {{ option.label }}\\n            </a-select-option>\\n          </a-select>\\n        </a-form-item>\\n\\n        <a-form-item label=\\\"版本编号\\\">\\n          <a-select\\n            v-model:value=\\\"searchParams.templateCode\\\"\\n            placeholder=\\\"请选择\\\"\\n            allow-clear\\n            style=\\\"width: 200px\\\"\\n          >\\n            <a-select-option\\n              v-for=\\\"option in versionOptions\\\"\\n              :key=\\\"option.value\\\"\\n              :value=\\\"option.value\\\"\\n            >\\n              {{ option.label }}\\n            </a-select-option>\\n          </a-select>\\n        </a-form-item>\\n\\n        <a-form-item label=\\\"生效时间\\\">\\n          <a-range-picker\\n            v-model:value=\\\"searchParams.createTimeRange\\\"\\n            show-time\\n            :placeholder=\\\"['开始时间', '结束时间']\\\"\\n            format=\\\"YYYY-MM-DD HH:mm:ss\\\"\\n            value-format=\\\"YYYY-MM-DD HH:mm:ss\\\"\\n            style=\\\"width: 350px\\\"\\n          />\\n        </a-form-item>\\n      </a-form>\\n\\n      <div class=\\\"search-buttons\\\">\\n        <a-button\\n          type=\\\"primary\\\"\\n          :disabled=\\\"isSearchDisabled\\\"\\n          @click=\\\"handleSearch\\\"\\n        >\\n          查询\\n        </a-button>\\n        <a-button\\n          style=\\\"margin-left: 8px\\\"\\n          @click=\\\"handleReset\\\"\\n        >\\n          重置\\n        </a-button>\\n      </div>\\n    </div>\\n    <div class=\\\"search-footer-buttons\\\">\\n      <a-button\\n        type=\\\"primary\\\"\\n        @click=\\\"handleCreate\\\"\\n      >\\n        新建\\n      </a-button>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\n  import { onMounted, ref, computed } from 'vue';\\n  import { storeToRefs } from 'pinia';\\n  import { debounce } from 'lodash-es';\\n  import { LoadingOutlined } from '@ant-design/icons-vue';\\n  import { usePageManagerListStore } from '../store';\\n  import { getProductNameSuggestions } from '../api';\\n  import { useRouter } from 'vue-router';\\n\\n  const router = useRouter();\\n  const store = usePageManagerListStore();\\n  const { searchParams, statusOptions, versionOptions } = storeToRefs(store);\\n  const { handleSearch, handleReset, fetchStatusOptions, fetchVersionOptions } =\\n    store;\\n\\n  // 商品名称建议数据\\n  const productNameSuggestions = ref([]);\\n  // 搜索loading状态\\n  const searchLoading = ref(false);\\n\\n  // 计算查询按钮是否禁用\\n  const isSearchDisabled = computed(() => {\\n    const params = searchParams.value;\\n    return (\\n      !params.productName &&\\n      !params.factoryName &&\\n      !params.status &&\\n      !params.templateCode &&\\n      (!params.createTimeRange || params.createTimeRange.length !== 2)\\n    );\\n  });\\n\\n  // 实际的搜索函数\\n  const performSearch = async (searchText: string) => {\\n    try {\\n      searchLoading.value = true;\\n      const response = await getProductNameSuggestions(searchText);\\n      productNameSuggestions.value = response;\\n    } catch (error) {\\n      console.error('获取商品名称建议失败:', error);\\n      productNameSuggestions.value = [];\\n    } finally {\\n      searchLoading.value = false;\\n    }\\n  };\\n\\n  // 使用lodash-es的debounce创建防抖搜索函数\\n  const debouncedSearch = debounce(performSearch, 1000);\\n\\n  // 处理商品名称搜索（带防抖）\\n  const handleProductNameSearch = (searchText: string) => {\\n    // 如果搜索文本为空，清空建议列表\\n    if (!searchText.trim()) {\\n      productNameSuggestions.value = [];\\n      searchLoading.value = false;\\n      debouncedSearch.cancel(); // 取消待执行的防抖函数\\n      return;\\n    }\\n\\n    // 执行防抖搜索\\n    debouncedSearch(searchText);\\n  };\\n\\n  // 处理商品名称选择\\n  const handleProductNameSelect = (value: string) => {\\n    searchParams.value.productName = value;\\n  };\\n\\n  // 新建\\n  const handleCreate = () => {\\n    router.push({\\n      name: 'PageConfig',\\n      query: {\\n        mode: 'create',\\n      },\\n    });\\n  };\\n\\n  // 组件挂载时获取选项数据\\n  onMounted(() => {\\n    fetchStatusOptions();\\n    fetchVersionOptions();\\n  });\\n</script>\\n\\n<style scoped>\\n  .search-wrapper {\\n    padding: 20px;\\n    border-radius: 8px;\\n    background: #fff;\\n    margin-bottom: 16px;\\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\n  }\\n  .search-container {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: flex-start;\\n  }\\n\\n  .search-form {\\n    margin-bottom: 0;\\n    flex: 1;\\n  }\\n\\n  .search-form .ant-form-item {\\n    margin-bottom: 16px;\\n  }\\n\\n  .search-buttons {\\n    margin-left: 20px;\\n    flex-shrink: 0;\\n  }\\n  .search-footer-buttons {\\n    margin-top: 16px;\\n  }\\n</style>\",\n  \"newContent\": \"<template>\\n  <div class=\\\"search-wrapper\\\">\\n    <div class=\\\"search-container\\\">\\n      <a-form\\n        :model=\\\"searchParams\\\"\\n        layout=\\\"inline\\\"\\n        class=\\\"search-form\\\"\\n      >\\n        <a-form-item label=\\\"商品名称\\\">\\n          <a-auto-complete\\n            v-model:value=\\\"searchParams.productName\\\"\\n            :options=\\\"productNameSuggestions\\\"\\n            style=\\\"width: 200px\\\"\\n            @search=\\\"handleProductNameSearch\\\"\\n            @select=\\\"handleProductNameSelect\\\"\\n          >\\n            <a-input\\n              placeholder=\\\"请输入商品名称\\\"\\n              :allow-clear=\\\"true\\\"\\n            >\\n              <template #suffix>\\n                <LoadingOutlined v-if=\\\"searchLoading\\\" />\\n              </template>\\n            </a-input>\\n            <template #option=\\\"item\\\">\\n              <div\\n                style=\\\"\\n                  display: flex;\\n                  justify-content: space-between;\\n                  align-items: center;\\n                \\\"\\n              >\\n                <span>{{ item.label }}</span>\\n                <span style=\\\"color: #999; font-size: 12px\\\">\\n                  {{ item.category || '商品' }}\\n                </span>\\n              </div>\\n            </template>\\n          </a-auto-complete>\\n        </a-form-item>\\n\\n        <a-form-item label=\\\"方案编码\\\">\\n          <a-input\\n            v-model:value=\\\"searchParams.factoryName\\\"\\n            placeholder=\\\"请输入\\\"\\n            allow-clear\\n            style=\\\"width: 200px\\\"\\n          />\\n        </a-form-item>\\n\\n        <a-form-item label=\\\"状态\\\">\\n          <a-select\\n            v-model:value=\\\"searchParams.status\\\"\\n            placeholder=\\\"请选择\\\"\\n            allow-clear\\n            style=\\\"width: 200px\\\"\\n          >\\n            <a-select-option\\n              v-for=\\\"option in statusOptions\\\"\\n              :key=\\\"option.value\\\"\\n              :value=\\\"option.value\\\"\\n            >\\n              {{ option.label }}\\n            </a-select-option>\\n          </a-select>\\n        </a-form-item>\\n\\n        <a-form-item label=\\\"版本编号\\\">\\n          <a-select\\n            v-model:value=\\\"searchParams.templateCode\\\"\\n            placeholder=\\\"请选择\\\"\\n            allow-clear\\n            style=\\\"width: 200px\\\"\\n          >\\n            <a-select-option\\n              v-for=\\\"option in versionOptions\\\"\\n              :key=\\\"option.value\\\"\\n              :value=\\\"option.value\\\"\\n            >\\n              {{ option.label }}\\n            </a-select-option>\\n          </a-select>\\n        </a-form-item>\\n\\n        <a-form-item label=\\\"生效时间\\\">\\n          <a-range-picker\\n            v-model:value=\\\"searchParams.createTimeRange\\\"\\n            show-time\\n            :placeholder=\\\"['开始时间', '结束时间']\\\"\\n            format=\\\"YYYY-MM-DD HH:mm:ss\\\"\\n            value-format=\\\"YYYY-MM-DD HH:mm:ss\\\"\\n            style=\\\"width: 350px\\\"\\n          />\\n        </a-form-item>\\n      </a-form>\\n\\n      <div class=\\\"search-buttons\\\">\\n        <a-button\\n          type=\\\"primary\\\"\\n          :disabled=\\\"isSearchDisabled\\\"\\n          @click=\\\"handleSearch\\\"\\n        >\\n          查询\\n        </a-button>\\n        <a-button\\n          style=\\\"margin-left: 8px\\\"\\n          @click=\\\"handleReset\\\"\\n        >\\n          重置\\n        </a-button>\\n      </div>\\n    </div>\\n    <div class=\\\"search-footer-buttons\\\">\\n      <a-button\\n        type=\\\"primary\\\"\\n        @click=\\\"handleCreate\\\"\\n      >\\n        新建\\n      </a-button>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\n  import { onMounted, ref, computed } from 'vue';\\n  import { storeToRefs } from 'pinia';\\n  import { debounce } from 'lodash-es';\\n  import { LoadingOutlined } from '@ant-design/icons-vue';\\n  import { usePageManagerListStore } from '../store';\\n  import { getProductNameSuggestions } from '../api';\\n  import { useRouter } from 'vue-router';\\n\\n  const router = useRouter();\\n  const store = usePageManagerListStore();\\n  const { searchParams, statusOptions, versionOptions } = storeToRefs(store);\\n  const { handleSearch, handleReset, fetchStatusOptions, fetchVersionOptions } =\\n    store;\\n\\n  // 商品名称建议数据\\n  const productNameSuggestions = ref([]);\\n  // 搜索loading状态\\n  const searchLoading = ref(false);\\n\\n  // 计算查询按钮是否禁用\\n  const isSearchDisabled = computed(() => {\\n    const params = searchParams.value;\\n    return (\\n      !params.productName &&\\n      !params.factoryName &&\\n      !params.status &&\\n      !params.templateCode &&\\n      (!params.createTimeRange || params.createTimeRange.length !== 2)\\n    );\\n  });\\n\\n  // 实际的搜索函数\\n  const performSearch = async (searchText: string) => {\\n    try {\\n      searchLoading.value = true;\\n      const response = await getProductNameSuggestions(searchText);\\n      productNameSuggestions.value = response;\\n    } catch (error) {\\n      console.error('获取商品名称建议失败:', error);\\n      productNameSuggestions.value = [];\\n    } finally {\\n      searchLoading.value = false;\\n    }\\n    list.descs.map(i => {\\n      if (i.label === '商品名称') {\\n        i.category = '商品';\\n      }\\n    })\\n  };\\n\\n  // 使用lodash-es的debounce创建防抖搜索函数\\n  const debouncedSearch = debounce(performSearch, 1000);\\n\\n  // 处理商品名称搜索（带防抖）\\n  const handleProductNameSearch = (searchText: string) => {\\n    // 如果搜索文本为空，清空建议列表\\n    if (!searchText.trim()) {\\n      productNameSuggestions.value = [];\\n      searchLoading.value = false;\\n      debouncedSearch.cancel(); // 取消待执行的防抖函数\\n      return;\\n    }\\n\\n    // 执行防抖搜索\\n    debouncedSearch(searchText);\\n  };\\n\\n  // 处理商品名称选择\\n  const handleProductNameSelect = (value: string) => {\\n    searchParams.value.productName = value;\\n  };\\n\\n  // 新建\\n  const handleCreate = () => {\\n    router.push({\\n      name: 'PageConfig',\\n      query: {\\n        mode: 'create',\\n      },\\n    });\\n  };\\n\\n  // 组件挂载时获取选项数据\\n  onMounted(() => {\\n    fetchStatusOptions();\\n    fetchVersionOptions();\\n  });\\n</script>\\n\\n<style scoped>\\n  .search-wrapper {\\n    padding: 20px;\\n    border-radius: 8px;\\n    background: #fff;\\n    margin-bottom: 16px;\\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\n  }\\n  .search-container {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: flex-start;\\n  }\\n\\n  .search-form {\\n    margin-bottom: 0;\\n    flex: 1;\\n  }\\n\\n  .search-form .ant-form-item {\\n    margin-bottom: 16px;\\n  }\\n\\n  .search-buttons {\\n    margin-left: 20px;\\n    flex-shrink: 0;\\n  }\\n  .search-footer-buttons {\\n    margin-top: 16px;\\n  }\\n</style>\",\n  \"stats\": {\n    \"additions\": 5,\n    \"deletions\": 0,\n    \"status\": \"added\"\n  },\n  \"summary\": {\n    \"additions\": 5,\n    \"deletions\": 0,\n    \"totalChanges\": 5,\n    \"status\": \"added\"\n  },\n  \"desc\": \"/Users/mac/Documents/cxq/lerna-demo 仓库 master 分支和 test 分支中文件 packages/vue-pc/src/views/pageManager/list/components/search.vue 的 diff 内容\"\n}",
  "snippet": "/Users/mac/Documents/cxq/lerna-demo 仓库 master 分支和 test 分支中文件 packages/vue-pc/src/views/pageManager/list/components/search.vue 的 diff 内容",
  "skill": "code_review",
  "skillDescription": "",
  "script": "scripts/getDiffinfoOfFile.js",
  "createdAt": 1768362531434,
  "updatedAt": 1768362531434,
  "meta": {
    "name": "",
    "description": "",
    "type": "object",
    "desc": "/Users/mac/Documents/cxq/lerna-demo 仓库 master 分支和 test 分支中文件 packages/vue-pc/src/views/pageManager/list/components/search.vue 的 diff 内容"
  },
  "deprecated": false
}