{
  "toolName": "call",
  "type": "call",
  "content": "{\n  \"filename\": \"packages/vue-pc/src/views/list/List.vue\",\n  \"content\": \"diff --git a/packages/vue-pc/src/views/list/List.vue b/packages/vue-pc/src/views/list/List.vue\\nindex 1470c57..43bb8b5 100644\\n--- a/packages/vue-pc/src/views/list/List.vue\\n+++ b/packages/vue-pc/src/views/list/List.vue\\n@@ -75,262 +75,73 @@\\n </template>\\n \\n <script setup lang=\\\"ts\\\">\\n-import { ref, reactive, onMounted } from 'vue';\\n-import { message } from 'ant-design-vue';\\n+import { onMounted, ref } from 'vue';\\n import { ExportOutlined, PlusOutlined } from '@ant-design/icons-vue';\\n import ListHeader from './components/ListHeader.vue';\\n import SearchForm from './components/SearchForm.vue';\\n import DataTable from './components/DataTable.vue';\\n import TablePagination from './components/TablePagination.vue';\\n import AddMaterialModal from './components/AddMaterialModal.vue';\\n-\\n-interface MaterialRecord {\\n-  id: string;\\n-  materialName: string;\\n-  materialType: string;\\n-  materialCode: string;\\n-  quantity: number;\\n-  status: string;\\n-  createTime: string;\\n-  updateTime: string;\\n-  fileKey?: string;\\n-  isEffective?: boolean;\\n-  effectiveTime?: string;\\n+import { useList } from './useList'\\n+import type { MaterialRecord, SearchFormData } from './service'\\n+const {\\n+  loading,\\n+  tableData,\\n+  selectedRowKeys,\\n+  searchParams,\\n+  pagination,\\n+  fetchData,\\n+  handleSearch,\\n+  handleReset,\\n+  handlePageChange,\\n+  handleSelectionChange,\\n+  clearSelection,\\n+  handleAdd: openAddByComposable,\\n+  handleEdit: openEditByComposable,\\n+  handleDelete,\\n+  handleBatchDelete,\\n+  handleExport,\\n+  handleBatchExport,\\n+} = useList()\\n+\\n+const modalVisible = ref(false)\\n+const modalStatus = ref<'add' | 'edit'>('add')\\n+const editData = ref<any>(undefined)\\n+\\n+function openModal(status: 'add' | 'edit', data?: MaterialRecord) {\\n+  modalStatus.value = status\\n+  editData.value = data\\n+    ? {\\n+        ...data,\\n+        fileKey: data.fileKey || '',\\n+        isEffective: !!data.isEffective,\\n+      }\\n+    : undefined\\n+  modalVisible.value = true\\n }\\n \\n-interface SearchFormData {\\n-  materialName?: string;\\n-  materialCode?: string;\\n-  materialType?: string;\\n-  status?: string;\\n-  updateTime?: any[];\\n+function handleAdd() {\\n+  openAddByComposable(openModal as any)\\n }\\n \\n-// 响应式数据\\n-const loading = ref(false);\\n-const tableData = ref<MaterialRecord[]>([]);\\n-const selectedRowKeys = ref<string[]>([]);\\n-const searchParams = reactive<SearchFormData>({});\\n-const pagination = reactive({\\n-  current: 1,\\n-  pageSize: 10,\\n-  total: 0,\\n-});\\n-\\n-// 弹框相关状态\\n-const modalVisible = ref(false);\\n-const modalStatus = ref<'add' | 'edit'>('add');\\n-const editData = ref<MaterialRecord | undefined>(undefined);\\n-\\n-// 模拟数据\\n-const mockData: MaterialRecord[] = [\\n-  {\\n-    id: '1',\\n-    materialName: '个人自主权书',\\n-    materialType: '通用',\\n-    materialCode: 'COMMON',\\n-    quantity: 2,\\n-    status: 'active',\\n-    createTime: '2025-05-21 00:00:00',\\n-    updateTime: '2025-05-21 00:00:00',\\n-    fileKey: 'file_key_001',\\n-    isEffective: true,\\n-    effectiveTime: '2025-05-21 00:00:00',\\n-  },\\n-  {\\n-    id: '2',\\n-    materialName: '各种要求书',\\n-    materialType: '通用',\\n-    materialCode: 'COMMON',\\n-    quantity: 8,\\n-    status: 'active',\\n-    createTime: '2025-05-21 00:00:00',\\n-    updateTime: '2025-05-21 00:00:00',\\n-    fileKey: 'file_key_002',\\n-    isEffective: true,\\n-    effectiveTime: '2025-05-21 00:00:00',\\n-  },\\n-  {\\n-    id: '3',\\n-    materialName: '主要要求书',\\n-    materialType: '商品',\\n-    materialCode: 'AMG00000793',\\n-    quantity: 5,\\n-    status: 'active',\\n-    createTime: '2025-05-21 00:00:00',\\n-    updateTime: '2025-05-21 00:00:00',\\n-    fileKey: 'file_key_003',\\n-    isEffective: true,\\n-    effectiveTime: '2025-05-21 00:00:00',\\n-  },\\n-  {\\n-    id: '4',\\n-    materialName: '系统要求',\\n-    materialType: '企业',\\n-    materialCode: 'AMG00000794',\\n-    quantity: 6,\\n-    status: 'active',\\n-    createTime: '2025-05-21 00:00:00',\\n-    updateTime: '2025-05-21 00:00:00',\\n-    fileKey: 'file_key_004',\\n-    isEffective: false,\\n-    effectiveTime: '2025-05-21 00:00:00',\\n-  },\\n-  {\\n-    id: '5',\\n-    materialName: '全部要求书',\\n-    materialType: '商品',\\n-    materialCode: '911101056851353021',\\n-    quantity: 7,\\n-    status: 'inactive',\\n-    createTime: '2025-05-21 00:00:00',\\n-    updateTime: '2025-05-21 00:00:00',\\n-    fileKey: 'file_key_005',\\n-    isEffective: false,\\n-    effectiveTime: '2025-05-21 00:00:00',\\n-  },\\n-];\\n-\\n-// 获取列表数据\\n-const fetchData = async () => {\\n-  loading.value = true;\\n-  try {\\n-    // 模拟API调用\\n-    await new Promise(resolve => setTimeout(resolve, 500));\\n-    \\n-    // 模拟分页和搜索\\n-    let filteredData = [...mockData];\\n-    \\n-    // 应用搜索条件\\n-    if (searchParams.materialName) {\\n-      filteredData = filteredData.filter(item => \\n-        item.materialName.includes(searchParams.materialName!)\\n-      );\\n-    }\\n-    if (searchParams.materialCode) {\\n-      filteredData = filteredData.filter(item => \\n-        item.materialCode.includes(searchParams.materialCode!)\\n-      );\\n-    }\\n-    if (searchParams.materialType) {\\n-      filteredData = filteredData.filter(item => \\n-        item.materialType === searchParams.materialType\\n-      );\\n-    }\\n-    if (searchParams.status) {\\n-      filteredData = filteredData.filter(item => \\n-        item.status === searchParams.status\\n-      );\\n-    }\\n-    \\n-    // 分页\\n-    const start = (pagination.current - 1) * pagination.pageSize;\\n-    const end = start + pagination.pageSize;\\n-    \\n-    tableData.value = filteredData.slice(start, end);\\n-    pagination.total = filteredData.length;\\n-  } catch (error) {\\n-    message.error('获取数据失败');\\n-  } finally {\\n-    loading.value = false;\\n-  }\\n-};\\n-\\n-// 事件处理\\n-const handleSearch = (params: SearchFormData) => {\\n-  Object.assign(searchParams, params);\\n-  pagination.current = 1;\\n-  fetchData();\\n-};\\n-\\n-const handleReset = () => {\\n-  Object.keys(searchParams).forEach(key => {\\n-    delete searchParams[key as keyof SearchFormData];\\n-  });\\n-  pagination.current = 1;\\n-  fetchData();\\n-};\\n-\\n-const handlePageChange = (page: number, pageSize: number) => {\\n-  pagination.current = page;\\n-  pagination.pageSize = pageSize;\\n-  fetchData();\\n-};\\n-\\n-const handleSelectionChange = (keys: string[], rows: MaterialRecord[]) => {\\n-  selectedRowKeys.value = keys;\\n-};\\n-\\n-const clearSelection = () => {\\n-  selectedRowKeys.value = [];\\n-};\\n-\\n-// 打开新增弹框\\n-const handleAdd = () => {\\n-  modalStatus.value = 'add';\\n-  editData.value = undefined;\\n-  modalVisible.value = true;\\n-};\\n-\\n-// 打开编辑弹框\\n-const handleEdit = (record: MaterialRecord) => {\\n-  modalStatus.value = 'edit';\\n-  editData.value = { ...record };\\n-  modalVisible.value = true;\\n-};\\n-\\n-// 弹框提交\\n-const handleModalSubmit = (data: any, status: 'add' | 'edit') => {\\n-  console.log(`${status === 'add' ? '新增' : '编辑'}数据:`, data);\\n-  \\n-  if (status === 'add') {\\n-    // 处理新增逻辑\\n-    message.success('新增成功！');\\n-  } else {\\n-    // 处理编辑逻辑\\n-    message.success('编辑成功！');\\n-  }\\n-  \\n-  // 重新获取列表数据\\n-  fetchData();\\n-  modalVisible.value = false;\\n-};\\n-\\n-// 弹框取消\\n-const handleModalCancel = () => {\\n-  modalVisible.value = false;\\n-  editData.value = undefined;\\n-};\\n-\\n-const handleView = (record: MaterialRecord) => {\\n-  message.info(`查看: ${record.materialName}`);\\n-};\\n-\\n-\\n-const handleCopy = (record: MaterialRecord) => {\\n-  message.info(`复制: ${record.materialName}`);\\n-};\\n+function handleEdit(record: MaterialRecord) {\\n+  openEditByComposable(record, openModal as any)\\n+}\\n \\n-const handleDelete = (record: MaterialRecord) => {\\n-  message.success(`删除成功: ${record.materialName}`);\\n-  fetchData();\\n-};\\n+function handleModalSubmit(data: any, status: 'add' | 'edit') {\\n+  fetchData()\\n+  modalVisible.value = false\\n+}\\n \\n-const handleExport = () => {\\n-  message.info('导出功能');\\n-};\\n+function handleModalCancel() {\\n+  modalVisible.value = false\\n+  editData.value = undefined\\n+}\\n \\n-const handleBatchDelete = () => {\\n-  message.success(`批量删除 ${selectedRowKeys.value.length} 项`);\\n-  selectedRowKeys.value = [];\\n-  fetchData();\\n-};\\n+function handleView(record: MaterialRecord) {}\\n \\n-const handleBatchExport = () => {\\n-  message.info(`批量导出 ${selectedRowKeys.value.length} 项`);\\n-};\\n+function handleCopy(record: MaterialRecord) {}\\n \\n-// 初始化\\n onMounted(() => {\\n   fetchData();\\n });\\n@@ -350,4 +161,4 @@ onMounted(() => {\\n   padding: 8px 16px;\\n   margin-bottom: 16px;\\n }\\n-</style>\\n\\\\ No newline at end of file\\n+</style>\",\n  \"originalContent\": \"<template>\\n  <div class=\\\"list-page\\\">\\n    <!-- 列表头 -->\\n    <ListHeader\\n      title=\\\"物料列表\\\"\\n      description=\\\"管理系统中的所有物料信息\\\"\\n      @add=\\\"handleAdd\\\"\\n    >\\n      <template #actions>\\n        <a-space>\\n          <a-button @click=\\\"handleExport\\\">\\n            <template #icon><ExportOutlined /></template>\\n            导出\\n          </a-button>\\n          <a-button type=\\\"primary\\\" @click=\\\"handleAdd\\\">\\n            <template #icon><PlusOutlined /></template>\\n            新增物料\\n          </a-button>\\n        </a-space>\\n      </template>\\n    </ListHeader>\\n    \\n    <!-- 搜索模块 -->\\n    <SearchForm\\n      @search=\\\"handleSearch\\\"\\n      @reset=\\\"handleReset\\\"\\n      @add=\\\"handleAdd\\\"\\n    />\\n    \\n    <!-- 批量操作栏 -->\\n    <div v-if=\\\"selectedRowKeys.length > 0\\\" class=\\\"batch-actions\\\">\\n      <a-space>\\n        <span>已选择 {{ selectedRowKeys.length }} 项</span>\\n        <a-button size=\\\"small\\\" @click=\\\"handleBatchDelete\\\">\\n          批量删除\\n        </a-button>\\n        <a-button size=\\\"small\\\" @click=\\\"handleBatchExport\\\">\\n          批量导出\\n        </a-button>\\n        <a-button size=\\\"small\\\" type=\\\"link\\\" @click=\\\"clearSelection\\\">\\n          取消选择\\n        </a-button>\\n      </a-space>\\n    </div>\\n    \\n    <!-- 数据表格 -->\\n    <DataTable\\n      :data-source=\\\"tableData\\\"\\n      :loading=\\\"loading\\\"\\n      :selected-row-keys=\\\"selectedRowKeys\\\"\\n      @view=\\\"handleView\\\"\\n      @edit=\\\"handleEdit\\\"\\n      @copy=\\\"handleCopy\\\"\\n      @delete=\\\"handleDelete\\\"\\n      @selection-change=\\\"handleSelectionChange\\\"\\n    />\\n    \\n    <!-- 分页器 -->\\n    <TablePagination\\n      :current=\\\"pagination.current\\\"\\n      :page-size=\\\"pagination.pageSize\\\"\\n      :total=\\\"pagination.total\\\"\\n      @change=\\\"handlePageChange\\\"\\n    />\\n    \\n    <!-- 新增/编辑弹框 -->\\n    <AddMaterialModal\\n      v-model:open=\\\"modalVisible\\\"\\n      :status=\\\"modalStatus\\\"\\n      :data=\\\"editData\\\"\\n      @submit=\\\"handleModalSubmit\\\"\\n      @cancel=\\\"handleModalCancel\\\"\\n    />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref, reactive, onMounted } from 'vue';\\nimport { message } from 'ant-design-vue';\\nimport { ExportOutlined, PlusOutlined } from '@ant-design/icons-vue';\\nimport ListHeader from './components/ListHeader.vue';\\nimport SearchForm from './components/SearchForm.vue';\\nimport DataTable from './components/DataTable.vue';\\nimport TablePagination from './components/TablePagination.vue';\\nimport AddMaterialModal from './components/AddMaterialModal.vue';\\n\\ninterface MaterialRecord {\\n  id: string;\\n  materialName: string;\\n  materialType: string;\\n  materialCode: string;\\n  quantity: number;\\n  status: string;\\n  createTime: string;\\n  updateTime: string;\\n  fileKey?: string;\\n  isEffective?: boolean;\\n  effectiveTime?: string;\\n}\\n\\ninterface SearchFormData {\\n  materialName?: string;\\n  materialCode?: string;\\n  materialType?: string;\\n  status?: string;\\n  updateTime?: any[];\\n}\\n\\n// 响应式数据\\nconst loading = ref(false);\\nconst tableData = ref<MaterialRecord[]>([]);\\nconst selectedRowKeys = ref<string[]>([]);\\nconst searchParams = reactive<SearchFormData>({});\\nconst pagination = reactive({\\n  current: 1,\\n  pageSize: 10,\\n  total: 0,\\n});\\n\\n// 弹框相关状态\\nconst modalVisible = ref(false);\\nconst modalStatus = ref<'add' | 'edit'>('add');\\nconst editData = ref<MaterialRecord | undefined>(undefined);\\n\\n// 模拟数据\\nconst mockData: MaterialRecord[] = [\\n  {\\n    id: '1',\\n    materialName: '个人自主权书',\\n    materialType: '通用',\\n    materialCode: 'COMMON',\\n    quantity: 2,\\n    status: 'active',\\n    createTime: '2025-05-21 00:00:00',\\n    updateTime: '2025-05-21 00:00:00',\\n    fileKey: 'file_key_001',\\n    isEffective: true,\\n    effectiveTime: '2025-05-21 00:00:00',\\n  },\\n  {\\n    id: '2',\\n    materialName: '各种要求书',\\n    materialType: '通用',\\n    materialCode: 'COMMON',\\n    quantity: 8,\\n    status: 'active',\\n    createTime: '2025-05-21 00:00:00',\\n    updateTime: '2025-05-21 00:00:00',\\n    fileKey: 'file_key_002',\\n    isEffective: true,\\n    effectiveTime: '2025-05-21 00:00:00',\\n  },\\n  {\\n    id: '3',\\n    materialName: '主要要求书',\\n    materialType: '商品',\\n    materialCode: 'AMG00000793',\\n    quantity: 5,\\n    status: 'active',\\n    createTime: '2025-05-21 00:00:00',\\n    updateTime: '2025-05-21 00:00:00',\\n    fileKey: 'file_key_003',\\n    isEffective: true,\\n    effectiveTime: '2025-05-21 00:00:00',\\n  },\\n  {\\n    id: '4',\\n    materialName: '系统要求',\\n    materialType: '企业',\\n    materialCode: 'AMG00000794',\\n    quantity: 6,\\n    status: 'active',\\n    createTime: '2025-05-21 00:00:00',\\n    updateTime: '2025-05-21 00:00:00',\\n    fileKey: 'file_key_004',\\n    isEffective: false,\\n    effectiveTime: '2025-05-21 00:00:00',\\n  },\\n  {\\n    id: '5',\\n    materialName: '全部要求书',\\n    materialType: '商品',\\n    materialCode: '911101056851353021',\\n    quantity: 7,\\n    status: 'inactive',\\n    createTime: '2025-05-21 00:00:00',\\n    updateTime: '2025-05-21 00:00:00',\\n    fileKey: 'file_key_005',\\n    isEffective: false,\\n    effectiveTime: '2025-05-21 00:00:00',\\n  },\\n];\\n\\n// 获取列表数据\\nconst fetchData = async () => {\\n  loading.value = true;\\n  try {\\n    // 模拟API调用\\n    await new Promise(resolve => setTimeout(resolve, 500));\\n    \\n    // 模拟分页和搜索\\n    let filteredData = [...mockData];\\n    \\n    // 应用搜索条件\\n    if (searchParams.materialName) {\\n      filteredData = filteredData.filter(item => \\n        item.materialName.includes(searchParams.materialName!)\\n      );\\n    }\\n    if (searchParams.materialCode) {\\n      filteredData = filteredData.filter(item => \\n        item.materialCode.includes(searchParams.materialCode!)\\n      );\\n    }\\n    if (searchParams.materialType) {\\n      filteredData = filteredData.filter(item => \\n        item.materialType === searchParams.materialType\\n      );\\n    }\\n    if (searchParams.status) {\\n      filteredData = filteredData.filter(item => \\n        item.status === searchParams.status\\n      );\\n    }\\n    \\n    // 分页\\n    const start = (pagination.current - 1) * pagination.pageSize;\\n    const end = start + pagination.pageSize;\\n    \\n    tableData.value = filteredData.slice(start, end);\\n    pagination.total = filteredData.length;\\n  } catch (error) {\\n    message.error('获取数据失败');\\n  } finally {\\n    loading.value = false;\\n  }\\n};\\n\\n// 事件处理\\nconst handleSearch = (params: SearchFormData) => {\\n  Object.assign(searchParams, params);\\n  pagination.current = 1;\\n  fetchData();\\n};\\n\\nconst handleReset = () => {\\n  Object.keys(searchParams).forEach(key => {\\n    delete searchParams[key as keyof SearchFormData];\\n  });\\n  pagination.current = 1;\\n  fetchData();\\n};\\n\\nconst handlePageChange = (page: number, pageSize: number) => {\\n  pagination.current = page;\\n  pagination.pageSize = pageSize;\\n  fetchData();\\n};\\n\\nconst handleSelectionChange = (keys: string[], rows: MaterialRecord[]) => {\\n  selectedRowKeys.value = keys;\\n};\\n\\nconst clearSelection = () => {\\n  selectedRowKeys.value = [];\\n};\\n\\n// 打开新增弹框\\nconst handleAdd = () => {\\n  modalStatus.value = 'add';\\n  editData.value = undefined;\\n  modalVisible.value = true;\\n};\\n\\n// 打开编辑弹框\\nconst handleEdit = (record: MaterialRecord) => {\\n  modalStatus.value = 'edit';\\n  editData.value = { ...record };\\n  modalVisible.value = true;\\n};\\n\\n// 弹框提交\\nconst handleModalSubmit = (data: any, status: 'add' | 'edit') => {\\n  console.log(`${status === 'add' ? '新增' : '编辑'}数据:`, data);\\n  \\n  if (status === 'add') {\\n    // 处理新增逻辑\\n    message.success('新增成功！');\\n  } else {\\n    // 处理编辑逻辑\\n    message.success('编辑成功！');\\n  }\\n  \\n  // 重新获取列表数据\\n  fetchData();\\n  modalVisible.value = false;\\n};\\n\\n// 弹框取消\\nconst handleModalCancel = () => {\\n  modalVisible.value = false;\\n  editData.value = undefined;\\n};\\n\\nconst handleView = (record: MaterialRecord) => {\\n  message.info(`查看: ${record.materialName}`);\\n};\\n\\n\\nconst handleCopy = (record: MaterialRecord) => {\\n  message.info(`复制: ${record.materialName}`);\\n};\\n\\nconst handleDelete = (record: MaterialRecord) => {\\n  message.success(`删除成功: ${record.materialName}`);\\n  fetchData();\\n};\\n\\nconst handleExport = () => {\\n  message.info('导出功能');\\n};\\n\\nconst handleBatchDelete = () => {\\n  message.success(`批量删除 ${selectedRowKeys.value.length} 项`);\\n  selectedRowKeys.value = [];\\n  fetchData();\\n};\\n\\nconst handleBatchExport = () => {\\n  message.info(`批量导出 ${selectedRowKeys.value.length} 项`);\\n};\\n\\n// 初始化\\nonMounted(() => {\\n  fetchData();\\n});\\n</script>\\n\\n<style scoped>\\n.list-page {\\n  padding: 24px;\\n  background: #f5f5f5;\\n  min-height: 100vh;\\n}\\n\\n.batch-actions {\\n  background: #e6f7ff;\\n  border: 1px solid #91d5ff;\\n  border-radius: 6px;\\n  padding: 8px 16px;\\n  margin-bottom: 16px;\\n}\\n</style>\",\n  \"newContent\": \"<template>\\n  <div class=\\\"list-page\\\">\\n    <!-- 列表头 -->\\n    <ListHeader\\n      title=\\\"物料列表\\\"\\n      description=\\\"管理系统中的所有物料信息\\\"\\n      @add=\\\"handleAdd\\\"\\n    >\\n      <template #actions>\\n        <a-space>\\n          <a-button @click=\\\"handleExport\\\">\\n            <template #icon><ExportOutlined /></template>\\n            导出\\n          </a-button>\\n          <a-button type=\\\"primary\\\" @click=\\\"handleAdd\\\">\\n            <template #icon><PlusOutlined /></template>\\n            新增物料\\n          </a-button>\\n        </a-space>\\n      </template>\\n    </ListHeader>\\n    \\n    <!-- 搜索模块 -->\\n    <SearchForm\\n      @search=\\\"handleSearch\\\"\\n      @reset=\\\"handleReset\\\"\\n      @add=\\\"handleAdd\\\"\\n    />\\n    \\n    <!-- 批量操作栏 -->\\n    <div v-if=\\\"selectedRowKeys.length > 0\\\" class=\\\"batch-actions\\\">\\n      <a-space>\\n        <span>已选择 {{ selectedRowKeys.length }} 项</span>\\n        <a-button size=\\\"small\\\" @click=\\\"handleBatchDelete\\\">\\n          批量删除\\n        </a-button>\\n        <a-button size=\\\"small\\\" @click=\\\"handleBatchExport\\\">\\n          批量导出\\n        </a-button>\\n        <a-button size=\\\"small\\\" type=\\\"link\\\" @click=\\\"clearSelection\\\">\\n          取消选择\\n        </a-button>\\n      </a-space>\\n    </div>\\n    \\n    <!-- 数据表格 -->\\n    <DataTable\\n      :data-source=\\\"tableData\\\"\\n      :loading=\\\"loading\\\"\\n      :selected-row-keys=\\\"selectedRowKeys\\\"\\n      @view=\\\"handleView\\\"\\n      @edit=\\\"handleEdit\\\"\\n      @copy=\\\"handleCopy\\\"\\n      @delete=\\\"handleDelete\\\"\\n      @selection-change=\\\"handleSelectionChange\\\"\\n    />\\n    \\n    <!-- 分页器 -->\\n    <TablePagination\\n      :current=\\\"pagination.current\\\"\\n      :page-size=\\\"pagination.pageSize\\\"\\n      :total=\\\"pagination.total\\\"\\n      @change=\\\"handlePageChange\\\"\\n    />\\n    \\n    <!-- 新增/编辑弹框 -->\\n    <AddMaterialModal\\n      v-model:open=\\\"modalVisible\\\"\\n      :status=\\\"modalStatus\\\"\\n      :data=\\\"editData\\\"\\n      @submit=\\\"handleModalSubmit\\\"\\n      @cancel=\\\"handleModalCancel\\\"\\n    />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { onMounted, ref } from 'vue';\\nimport { ExportOutlined, PlusOutlined } from '@ant-design/icons-vue';\\nimport ListHeader from './components/ListHeader.vue';\\nimport SearchForm from './components/SearchForm.vue';\\nimport DataTable from './components/DataTable.vue';\\nimport TablePagination from './components/TablePagination.vue';\\nimport AddMaterialModal from './components/AddMaterialModal.vue';\\nimport { useList } from './useList'\\nimport type { MaterialRecord, SearchFormData } from './service'\\nconst {\\n  loading,\\n  tableData,\\n  selectedRowKeys,\\n  searchParams,\\n  pagination,\\n  fetchData,\\n  handleSearch,\\n  handleReset,\\n  handlePageChange,\\n  handleSelectionChange,\\n  clearSelection,\\n  handleAdd: openAddByComposable,\\n  handleEdit: openEditByComposable,\\n  handleDelete,\\n  handleBatchDelete,\\n  handleExport,\\n  handleBatchExport,\\n} = useList()\\n\\nconst modalVisible = ref(false)\\nconst modalStatus = ref<'add' | 'edit'>('add')\\nconst editData = ref<any>(undefined)\\n\\nfunction openModal(status: 'add' | 'edit', data?: MaterialRecord) {\\n  modalStatus.value = status\\n  editData.value = data\\n    ? {\\n        ...data,\\n        fileKey: data.fileKey || '',\\n        isEffective: !!data.isEffective,\\n      }\\n    : undefined\\n  modalVisible.value = true\\n}\\n\\nfunction handleAdd() {\\n  openAddByComposable(openModal as any)\\n}\\n\\nfunction handleEdit(record: MaterialRecord) {\\n  openEditByComposable(record, openModal as any)\\n}\\n\\nfunction handleModalSubmit(data: any, status: 'add' | 'edit') {\\n  fetchData()\\n  modalVisible.value = false\\n}\\n\\nfunction handleModalCancel() {\\n  modalVisible.value = false\\n  editData.value = undefined\\n}\\n\\nfunction handleView(record: MaterialRecord) {}\\n\\nfunction handleCopy(record: MaterialRecord) {}\\n\\nonMounted(() => {\\n  fetchData();\\n});\\n</script>\\n\\n<style scoped>\\n.list-page {\\n  padding: 24px;\\n  background: #f5f5f5;\\n  min-height: 100vh;\\n}\\n\\n.batch-actions {\\n  background: #e6f7ff;\\n  border: 1px solid #91d5ff;\\n  border-radius: 6px;\\n  padding: 8px 16px;\\n  margin-bottom: 16px;\\n}\\n</style>\",\n  \"stats\": {\n    \"additions\": 53,\n    \"deletions\": 242,\n    \"status\": \"modified\"\n  },\n  \"summary\": {\n    \"additions\": 53,\n    \"deletions\": 242,\n    \"totalChanges\": 295,\n    \"status\": \"modified\"\n  },\n  \"desc\": \"/Users/mac/Documents/cxq/lerna-demo 仓库 master 分支和 test 分支中文件 packages/vue-pc/src/views/list/List.vue 的 diff 内容\"\n}",
  "snippet": "/Users/mac/Documents/cxq/lerna-demo 仓库 master 分支和 test 分支中文件 packages/vue-pc/src/views/list/List.vue 的 diff 内容",
  "skill": "code_review",
  "skillDescription": "",
  "script": "scripts/getDiffinfoOfFile.js",
  "createdAt": 1768464551804,
  "updatedAt": 1768464551804,
  "meta": {
    "name": "",
    "description": "",
    "type": "object",
    "desc": "/Users/mac/Documents/cxq/lerna-demo 仓库 master 分支和 test 分支中文件 packages/vue-pc/src/views/list/List.vue 的 diff 内容"
  },
  "deprecated": false
}