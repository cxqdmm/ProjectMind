{
  "toolName": "call",
  "type": "call",
  "content": "{\n  \"filename\": \"packages/vue-pc/src/views/list/service.ts\",\n  \"content\": \"diff --git a/packages/vue-pc/src/views/list/service.ts b/packages/vue-pc/src/views/list/service.ts\\nnew file mode 100644\\nindex 0000000..9fb99e3\\n--- /dev/null\\n+++ b/packages/vue-pc/src/views/list/service.ts\\n@@ -0,0 +1,75 @@\\n+export interface MaterialRecord {\\n+  id: string\\n+  materialName: string\\n+  materialType: string\\n+  materialCode: string\\n+  quantity: number\\n+  status: string\\n+  createTime: string\\n+  updateTime: string\\n+  fileKey?: string\\n+  isEffective?: boolean\\n+  effectiveTime?: string\\n+}\\n+\\n+export interface SearchFormData {\\n+  materialName?: string\\n+  materialCode?: string\\n+  materialType?: string\\n+  status?: string\\n+  updateTime?: any[]\\n+}\\n+\\n+const KEY = 'list.materials'\\n+const SEEDED = 'list.materials.seeded'\\n+\\n+const seed: MaterialRecord[] = [\\n+  { id: '1', materialName: '个人自主权书', materialType: '通用', materialCode: 'COMMON', quantity: 2, status: 'active', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_001', isEffective: true, effectiveTime: '2025-05-21 00:00:00' },\\n+  { id: '2', materialName: '各种要求书', materialType: '通用', materialCode: 'COMMON', quantity: 8, status: 'active', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_002', isEffective: true, effectiveTime: '2025-05-21 00:00:00' },\\n+  { id: '3', materialName: '主要要求书', materialType: '商品', materialCode: 'AMG00000793', quantity: 5, status: 'active', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_003', isEffective: true, effectiveTime: '2025-05-21 00:00:00' },\\n+  { id: '4', materialName: '系统要求', materialType: '企业', materialCode: 'AMG00000794', quantity: 6, status: 'active', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_004', isEffective: false, effectiveTime: '2025-05-21 00:00:00' },\\n+  { id: '5', materialName: '全部要求书', materialType: '商品', materialCode: '911101056851353021', quantity: 7, status: 'inactive', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_005', isEffective: false, effectiveTime: '2025-05-21 00:00:00' },\\n+]\\n+\\n+function read(): MaterialRecord[] {\\n+  const raw = localStorage.getItem(KEY)\\n+  if (!raw) return []\\n+  try { return JSON.parse(raw) as MaterialRecord[] } catch { return [] }\\n+}\\n+\\n+function write(items: MaterialRecord[]) {\\n+  localStorage.setItem(KEY, JSON.stringify(items))\\n+}\\n+\\n+function ensureSeed() {\\n+  if (localStorage.getItem(SEEDED)) return\\n+  const items = read()\\n+  write(items.length ? items : seed)\\n+  localStorage.setItem(SEEDED, '1')\\n+}\\n+\\n+export async function listMaterials(params: { page: number; pageSize: number; search?: SearchFormData }) {\\n+  ensureSeed()\\n+  await new Promise(r => setTimeout(r, 200))\\n+  let items = read()\\n+  const s = params.search || {}\\n+  if (s.materialName) items = items.filter(i => i.materialName.includes(s.materialName!))\\n+  if (s.materialCode) items = items.filter(i => i.materialCode.includes(s.materialCode!))\\n+  if (s.materialType) items = items.filter(i => i.materialType === s.materialType)\\n+  if (s.status) items = items.filter(i => i.status === s.status)\\n+  const total = items.length\\n+  const start = (params.page - 1) * params.pageSize\\n+  const rows = items.slice(start, start + params.pageSize)\\n+  return { total, rows }\\n+}\\n+\\n+export async function removeMaterials(ids: string[]) {\\n+  const items = read().filter(i => !ids.includes(i.id))\\n+  write(items)\\n+  await new Promise(r => setTimeout(r, 100))\\n+  return true\\n+}\\n+\\n+export async function removeMaterial(id: string) {\\n+  return removeMaterials([id])\\n+}\",\n  \"originalContent\": \"\",\n  \"newContent\": \"export interface MaterialRecord {\\n  id: string\\n  materialName: string\\n  materialType: string\\n  materialCode: string\\n  quantity: number\\n  status: string\\n  createTime: string\\n  updateTime: string\\n  fileKey?: string\\n  isEffective?: boolean\\n  effectiveTime?: string\\n}\\n\\nexport interface SearchFormData {\\n  materialName?: string\\n  materialCode?: string\\n  materialType?: string\\n  status?: string\\n  updateTime?: any[]\\n}\\n\\nconst KEY = 'list.materials'\\nconst SEEDED = 'list.materials.seeded'\\n\\nconst seed: MaterialRecord[] = [\\n  { id: '1', materialName: '个人自主权书', materialType: '通用', materialCode: 'COMMON', quantity: 2, status: 'active', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_001', isEffective: true, effectiveTime: '2025-05-21 00:00:00' },\\n  { id: '2', materialName: '各种要求书', materialType: '通用', materialCode: 'COMMON', quantity: 8, status: 'active', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_002', isEffective: true, effectiveTime: '2025-05-21 00:00:00' },\\n  { id: '3', materialName: '主要要求书', materialType: '商品', materialCode: 'AMG00000793', quantity: 5, status: 'active', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_003', isEffective: true, effectiveTime: '2025-05-21 00:00:00' },\\n  { id: '4', materialName: '系统要求', materialType: '企业', materialCode: 'AMG00000794', quantity: 6, status: 'active', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_004', isEffective: false, effectiveTime: '2025-05-21 00:00:00' },\\n  { id: '5', materialName: '全部要求书', materialType: '商品', materialCode: '911101056851353021', quantity: 7, status: 'inactive', createTime: '2025-05-21 00:00:00', updateTime: '2025-05-21 00:00:00', fileKey: 'file_key_005', isEffective: false, effectiveTime: '2025-05-21 00:00:00' },\\n]\\n\\nfunction read(): MaterialRecord[] {\\n  const raw = localStorage.getItem(KEY)\\n  if (!raw) return []\\n  try { return JSON.parse(raw) as MaterialRecord[] } catch { return [] }\\n}\\n\\nfunction write(items: MaterialRecord[]) {\\n  localStorage.setItem(KEY, JSON.stringify(items))\\n}\\n\\nfunction ensureSeed() {\\n  if (localStorage.getItem(SEEDED)) return\\n  const items = read()\\n  write(items.length ? items : seed)\\n  localStorage.setItem(SEEDED, '1')\\n}\\n\\nexport async function listMaterials(params: { page: number; pageSize: number; search?: SearchFormData }) {\\n  ensureSeed()\\n  await new Promise(r => setTimeout(r, 200))\\n  let items = read()\\n  const s = params.search || {}\\n  if (s.materialName) items = items.filter(i => i.materialName.includes(s.materialName!))\\n  if (s.materialCode) items = items.filter(i => i.materialCode.includes(s.materialCode!))\\n  if (s.materialType) items = items.filter(i => i.materialType === s.materialType)\\n  if (s.status) items = items.filter(i => i.status === s.status)\\n  const total = items.length\\n  const start = (params.page - 1) * params.pageSize\\n  const rows = items.slice(start, start + params.pageSize)\\n  return { total, rows }\\n}\\n\\nexport async function removeMaterials(ids: string[]) {\\n  const items = read().filter(i => !ids.includes(i.id))\\n  write(items)\\n  await new Promise(r => setTimeout(r, 100))\\n  return true\\n}\\n\\nexport async function removeMaterial(id: string) {\\n  return removeMaterials([id])\\n}\",\n  \"stats\": {\n    \"additions\": 75,\n    \"deletions\": 0,\n    \"status\": \"added\"\n  },\n  \"summary\": {\n    \"additions\": 75,\n    \"deletions\": 0,\n    \"totalChanges\": 75,\n    \"status\": \"added\"\n  },\n  \"desc\": \"/Users/mac/Documents/cxq/lerna-demo 仓库 master 分支和 test 分支中文件 packages/vue-pc/src/views/list/service.ts 的 diff 内容\"\n}",
  "snippet": "/Users/mac/Documents/cxq/lerna-demo 仓库 master 分支和 test 分支中文件 packages/vue-pc/src/views/list/service.ts 的 diff 内容",
  "skill": "code_review",
  "skillDescription": "",
  "script": "scripts/getDiffinfoOfFile.js",
  "createdAt": 1768533445511,
  "updatedAt": 1768533445511,
  "meta": {
    "name": "",
    "description": "",
    "type": "object",
    "desc": "/Users/mac/Documents/cxq/lerna-demo 仓库 master 分支和 test 分支中文件 packages/vue-pc/src/views/list/service.ts 的 diff 内容"
  },
  "deprecated": false
}